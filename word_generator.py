#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import requests
import re
from typing import List, Set
import json

def get_russian_words() -> Set[str]:
    """–ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ä—É—Å—Å–∫–∏—Ö —Å–ª–æ–≤ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞"""
    try:
        # –ü–æ–ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ª–æ–≤–∞—Ä—å —Å GitHub
        url = "https://raw.githubusercontent.com/danakt/russian-words/master/russian.txt"
        response = requests.get(url, timeout=10)
        if response.status_code == 200:
            words = set()
            for line in response.text.split('\n'):
                word = line.strip().lower()
                if len(word) == 5 and re.match(r'^[–∞-—è—ë]+$', word):
                    words.add(word)
            return words
    except:
        pass
    
    # –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –±–∞–∑–æ–≤—ã–π —Å–ø–∏—Å–æ–∫
    return {
        '–∞–±–≤–≥–¥', '–µ—ë–∂–∑–∏', '–π–∫–ª–º–Ω', '–æ–ø—Ä—Å—Ç', '—É—Ñ—Ö—Ü—á', '—à—â—ä—ã—å', '—ç—é—è',
        '–º–µ—Ç–ª–∞', '–±—É–ª–∫–∞', '–≥–Ω—É–ª–∞', '–¥–∂—É–ª–∞', '–∂–º—É–ª–∞', '–∑–≤—É–∫–∞', '–∏–≥—Ä–∞–ª',
        '–∫–Ω–∏–≥–∞', '–ª–∞–ø—à–∞', '–º–∞–º–∞', '–Ω–æ—á—å', '–æ–∫–Ω–æ', '–ø–µ—á—å', '—Ä—É–∫–∞',
        '—Å—Ç–æ–ª', '—Ç–µ–Ω—å', '—É—Ö–æ', '—Ñ–ª–∞–≥', '—Ö–ª–µ–±', '—Ü–∞—Ä—å', '—á–∞–π',
        '—à–∞—Ä', '—â–µ—Ç–∫–∞', '—ç—Ö–æ', '—é–ª–∞', '—è–º–∞',
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ 5-–±—É–∫–≤–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
        '–≤–æ–¥–∞', '–æ–≥–æ–Ω—å', '–∑–µ–º–ª—è', '–Ω–µ–±–æ', '–º–æ—Ä–µ', '–ª–µ—Å', '–ø–æ–ª–µ', '–≥–æ—Ä–∞', '—Ä–µ–∫–∞',
        '–≥–æ—Ä–æ–¥', '—Å–µ–ª–æ', '–¥–æ–º', '—Å–∞–¥', '–ø—É—Ç—å', '–¥–µ–Ω—å', '–≥–æ–¥', '—á–∞—Å', '–º–∏–Ω—É—Ç–∞',
        '–≤–µ—Ç–µ—Ä', '—Å–æ–ª–Ω—Ü–µ', '–ª—É–Ω–∞', '–∑–≤–µ–∑–¥–∞', '—Å–Ω–µ–≥', '–¥–æ–∂–¥—å', '–æ–±–ª–∞–∫–æ', '—Ç—É—á–∞',
        '—Ü–≤–µ—Ç–æ–∫', '–¥–µ—Ä–µ–≤–æ', '—Ç—Ä–∞–≤–∞', '–ª–∏—Å—Ç', '–∫–æ—Ä–µ–Ω—å', '–≤–µ—Ç–∫–∞', '–ø–ª–æ–¥', '—Å–µ–º—è',
        '–∂–∏–≤–æ—Ç', '–ø—Ç–∏—Ü–∞', '—Ä—ã–±–∞', '–∑–≤–µ—Ä—å', '–Ω–∞—Å–µ–∫–æ–º–æ–µ', '–±–∞–±–æ—á–∫–∞', '–º—É—Ä–∞–≤–µ–π',
        '—á–µ–ª–æ–≤–µ–∫', '—Ä–µ–±–µ–Ω–æ–∫', '–º–∞–ª—å—á–∏–∫', '–¥–µ–≤–æ—á–∫–∞', '–º—É–∂—á–∏–Ω–∞', '–∂–µ–Ω—â–∏–Ω–∞',
        '–¥—Ä—É–≥', '—Å–µ–º—å—è', '–±—Ä–∞—Ç', '—Å–µ—Å—Ç—Ä–∞', '–æ—Ç–µ—Ü', '–º–∞—Ç—å', '–±–∞–±—É—à–∫–∞', '–¥–µ–¥—É—à–∫–∞',
        '—É—á–∏—Ç–µ–ª—å', '–≤—Ä–∞—á', '–∏–Ω–∂–µ–Ω–µ—Ä', '–ø—Ä–æ–¥–∞–≤–µ—Ü', '–≤–æ–¥–∏—Ç–µ–ª—å', '–ø–æ–≤–∞—Ä',
        '—à–∫–æ–ª–∞', '—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç', '–±–æ–ª—å–Ω–∏—Ü–∞', '–º–∞–≥–∞–∑–∏–Ω', '—Ç–µ–∞—Ç—Ä', '–∫–∏–Ω–æ',
        '–º—É–∑–µ–π', '–±–∏–±–ª–∏–æ—Ç–µ–∫–∞', '—Å—Ç–∞–¥–∏–æ–Ω', '–ø–∞—Ä–∫', '–ø–ª–æ—â–∞–¥—å', '—É–ª–∏—Ü–∞',
        '–¥–æ—Ä–æ–≥–∞', '–º–æ—Å—Ç', '–∑–∞–±–æ—Ä', '—Å—Ç–µ–Ω–∞', '–æ–∫–Ω–æ', '–¥–≤–µ—Ä—å', '–∫—Ä—ã—à–∞',
        '—Å—Ç–æ–ª', '—Å—Ç—É–ª', '–∫—Ä–æ–≤–∞—Ç—å', '—à–∫–∞—Ñ', '–ø–æ–ª–∫–∞', '–∑–µ—Ä–∫–∞–ª–æ', '–ª–∞–º–ø–∞',
        '–∫–Ω–∏–≥–∞', '—Ç–µ—Ç—Ä–∞–¥—å', '—Ä—É—á–∫–∞', '–∫–∞—Ä–∞–Ω–¥–∞—à', '–ª–∏–Ω–µ–π–∫–∞', '–Ω–æ–∂–Ω–∏—Ü—ã',
        '—á–∞—à–∫–∞', '—Ç–∞—Ä–µ–ª–∫–∞', '–ª–æ–∂–∫–∞', '–≤–∏–ª–∫–∞', '–Ω–æ–∂', '–∫–∞—Å—Ç—Ä—é–ª—è', '—Å–∫–æ–≤–æ—Ä–æ–¥–∞',
        '—Ö–ª–µ–±', '–º–æ–ª–æ–∫–æ', '—Å—ã—Ä', '–º—è—Å–æ', '—Ä—ã–±–∞', '—è–π—Ü–æ', '–∫–∞—Ä—Ç–æ—à–∫–∞', '–º–æ—Ä–∫–æ–≤—å',
        '—è–±–ª–æ–∫–æ', '–≥—Ä—É—à–∞', '–≤–∏–Ω–æ–≥—Ä–∞–¥', '–∫–ª—É–±–Ω–∏–∫–∞', '–º–∞–ª–∏–Ω–∞', '—á–µ—Ä–Ω–∏–∫–∞',
        '–æ–¥–µ–∂–¥–∞', '—Ä—É–±–∞—à–∫–∞', '–±—Ä—é–∫–∏', '–ø–ª–∞—Ç—å–µ', '—é–±–∫–∞', '–∫–æ—Ñ—Ç–∞', '–∫—É—Ä—Ç–∫–∞',
        '—à–∞–ø–∫–∞', '—à–∞—Ä—Ñ', '–ø–µ—Ä—á–∞—Ç–∫–∏', '–±–æ—Ç–∏–Ω–∫–∏', '—Å–∞–ø–æ–≥–∏', '—Ç—É—Ñ–ª–∏',
        '–∏–≥—Ä—É—à–∫–∞', '–º—è—á', '–∫—É–∫–ª–∞', '–º–∞—à–∏–Ω–∫–∞', '–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä', '–ø–∞–∑–ª',
        '–∏–≥—Ä–∞', '–ø–µ—Å–Ω—è', '—Ç–∞–Ω–µ—Ü', '—Ä–∏—Å—É–Ω–æ–∫', '–∫–∞—Ä—Ç–∏–Ω–∞', '—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è',
        '–ø–∏—Å—å–º–æ', '—Ç–µ–ª–µ—Ñ–æ–Ω', '–∫–æ–º–ø—å—é—Ç–µ—Ä', '—Ç–µ–ª–µ–≤–∏–∑–æ—Ä', '—Ä–∞–¥–∏–æ', '—á–∞—Å—ã',
        '–∫–ª—é—á', '–∑–∞–º–æ–∫', '—Å—É–º–∫–∞', '–∫–æ—à–µ–ª–µ–∫', '–æ—á–∫–∏', '–∑–æ–Ω—Ç', '–∑–æ–Ω—Ç–∏–∫',
        '–≤–µ–ª–æ—Å–∏–ø–µ–¥', '–∞–≤—Ç–æ–º–æ–±–∏–ª—å', '–ø–æ–µ–∑–¥', '—Å–∞–º–æ–ª–µ—Ç', '–∫–æ—Ä–∞–±–ª—å', '–ª–æ–¥–∫–∞',
        '—É—Ç—Ä–æ', '–¥–µ–Ω—å', '–≤–µ—á–µ—Ä', '–Ω–æ—á—å', '–Ω–µ–¥–µ–ª—è', '–º–µ—Å—è—Ü', '—Å–µ–∑–æ–Ω',
        '–≤–µ—Å–Ω–∞', '–ª–µ—Ç–æ', '–æ—Å–µ–Ω—å', '–∑–∏–º–∞', '—è–Ω–≤–∞—Ä—å', '—Ñ–µ–≤—Ä–∞–ª—å', '–º–∞—Ä—Ç',
        '–∞–ø—Ä–µ–ª—å', '–º–∞–π', '–∏—é–Ω—å', '–∏—é–ª—å', '–∞–≤–≥—É—Å—Ç', '—Å–µ–Ω—Ç—è–±—Ä—å', '–æ–∫—Ç—è–±—Ä—å',
        '–Ω–æ—è–±—Ä—å', '–¥–µ–∫–∞–±—Ä—å', '–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–≤—Ç–æ—Ä–Ω–∏–∫', '—Å—Ä–µ–¥–∞', '—á–µ—Ç–≤–µ—Ä–≥',
        '–ø—è—Ç–Ω–∏—Ü–∞', '—Å—É–±–±–æ—Ç–∞', '–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'
    }

def is_noun(word: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–ª–æ–≤–æ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º"""
    # –°–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ—á–Ω–æ —è–≤–ª—è—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏
    known_nouns = {
        '–º–µ—Ç–ª–∞', '–±—É–ª–∫–∞', '–∫–Ω–∏–≥–∞', '–ª–∞–ø—à–∞', '–º–∞–º–∞', '–Ω–æ—á—å', '–æ–∫–Ω–æ', 
        '–ø–µ—á—å', '—Ä—É–∫–∞', '—Å—Ç–æ–ª', '—Ç–µ–Ω—å', '—É—Ö–æ', '—Ñ–ª–∞–≥', '—Ö–ª–µ–±', '—Ü–∞—Ä—å', 
        '—á–∞–π', '—à–∞—Ä', '—â–µ—Ç–∫–∞', '—ç—Ö–æ', '—é–ª–∞', '—è–º–∞', '–ø–∞—Ä—Ç–∞', '—Ç–µ–∞—Ç—Ä',
        '–¥–æ–º', '–∑–≤—É–∫', '–∏–≥—Ä–∞', '–≥–Ω—É–ª', '–¥–∂—É–ª', '–∂–º—É–ª', '—Å–Ω–µ–≥', '–¥–æ–∂–¥—å',
        '–≤–µ—Ç–µ—Ä', '—Å–æ–ª–Ω—Ü–µ', '–ª—É–Ω–∞', '–∑–≤–µ–∑–¥–∞', '–≤–æ–¥–∞', '–æ–≥–æ–Ω—å', '–∑–µ–º–ª—è',
        '–Ω–µ–±–æ', '–º–æ—Ä–µ', '–ª–µ—Å', '–ø–æ–ª–µ', '–≥–æ—Ä–∞', '—Ä–µ–∫–∞', '–≥–æ—Ä–æ–¥', '—Å–µ–ª–æ',
        '–¥–æ–º', '—Å–∞–¥', '–ø—É—Ç—å', '–¥–µ–Ω—å', '–≥–æ–¥', '—á–∞—Å', '–º–∏–Ω—É—Ç–∞', '—Å–µ–∫—É–Ω–¥–∞'
    }
    
    # –ï—Å–ª–∏ —Å–ª–æ–≤–æ –≤ —Å–ø–∏—Å–∫–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö
    if word in known_nouns:
        return True
    
    # –ò—Å–∫–ª—é—á–∞–µ–º –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã–µ (—Å–ª–æ–≤–∞, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ -—ã–π, -–æ–π, -–∏–π, -–∞—è, -—è—è, -–æ–µ, -–µ–µ)
    if word.endswith(('—ã–π', '–æ–π', '–∏–π', '–∞—è', '—è—è', '–æ–µ', '–µ–µ')):
        return False
    
    # –ò—Å–∫–ª—é—á–∞–µ–º –≥–ª–∞–≥–æ–ª—ã (—Å–ª–æ–≤–∞, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ -—Ç—å, -—Ç–∏, -—á—å, -–ª, -–ª–∞, -–ª–æ, -–ª–∏)
    if word.endswith(('—Ç—å', '—Ç–∏', '—á—å', '–ª', '–ª–∞', '–ª–æ', '–ª–∏')):
        return False
    
    # –ò—Å–∫–ª—é—á–∞–µ–º –≥–ª–∞–≥–æ–ª—ã –≤ –ø–æ–≤–µ–ª–∏—Ç–µ–ª—å–Ω–æ–º –Ω–∞–∫–ª–æ–Ω–µ–Ω–∏–∏ (-–∏, -–π)
    if word.endswith(('–∏', '–π')) and len(word) >= 3:
        return False
    
    # –ò—Å–∫–ª—é—á–∞–µ–º –≥–ª–∞–≥–æ–ª—ã —Å –ø—Ä–∏—Å—Ç–∞–≤–∫–∞–º–∏ (–Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å –ø–æ-, –∑–∞-, –ø–æ–¥-, –Ω–∞–¥-)
    if word.startswith(('–ø–æ', '–∑–∞', '–ø–æ–¥', '–Ω–∞–¥', '–æ—Ç', '–¥–æ', '–ø—Ä–æ', '–ø–µ—Ä–µ')):
        return False
    
    # –ò—Å–∫–ª—é—á–∞–µ–º –Ω–∞—Ä–µ—á–∏—è (—Å–ª–æ–≤–∞, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ -–æ, -–µ)
    if word.endswith(('–æ', '–µ')) and len(word) >= 4:
        # –ù–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ
        if len(word) <= 3:
            return True
    
    # –ò—Å–∫–ª—é—á–∞–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ (—Å–ª–æ–≤–∞, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ -—ã, -–∏)
    if word.endswith(('—ã', '–∏')) and len(word) >= 4:
        return False
    
    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è 5-–±—É–∫–≤–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤
    if len(word) == 5:
        # –°–ª–æ–≤–∞, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ -–∞, -—è, -—å –æ–±—ã—á–Ω–æ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ (–∂–µ–Ω—Å–∫–∏–π —Ä–æ–¥)
        if word.endswith(('–∞', '—è', '—å')):
            return True
        
        # –°–ª–æ–≤–∞ —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ —Å—É—Ñ—Ñ–∏–∫—Å–∞–º–∏ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö
        if any(suffix in word for suffix in ['–∫–∞', '–∫–∞', '–∫–∞', '–∫–∞']):
            return True
        
        # –°–ª–æ–≤–∞, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ —Å–æ–≥–ª–∞—Å–Ω—É—é (–º—É–∂—Å–∫–æ–π —Ä–æ–¥)
        if word[-1] in '–±–≤–≥–¥–∂–∑–π–∫–ª–º–Ω–ø—Ä—Å—Ç—Ñ—Ö—Ü—á—à—â':
            return True
    
    return False

def is_verb(word: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–ª–æ–≤–æ –≥–ª–∞–≥–æ–ª–æ–º"""
    # –¢–∏–ø–∏—á–Ω—ã–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≥–ª–∞–≥–æ–ª–æ–≤
    verb_endings = {
        '—Ç—å', '—Ç–∏', '—á—å',  # –∏–Ω—Ñ–∏–Ω–∏—Ç–∏–≤
        '–ª', '–ª–∞', '–ª–æ', '–ª–∏',  # –ø—Ä–æ—à–µ–¥—à–µ–µ –≤—Ä–µ–º—è
        '—é', '–µ—à—å', '–µ—Ç', '–µ–º', '–µ—Ç–µ', '—é—Ç',  # –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è
        '–∏', '–π'  # –ø–æ–≤–µ–ª–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∫–ª–æ–Ω–µ–Ω–∏–µ
    }
    
    # –ì–ª–∞–≥–æ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ç–æ—á–Ω–æ —è–≤–ª—è—é—Ç—Å—è –≥–ª–∞–≥–æ–ª–∞–º–∏
    known_verbs = {
        '–±–µ–∂–∞—Ç—å', '—Ö–æ–¥–∏—Ç—å', '–ø–µ—Ç—å', '—á–∏—Ç–∞—Ç—å', '–ø–∏—Å–∞—Ç—å', '–≥–æ–≤–æ—Ä–∏—Ç—å',
        '–¥—É–º–∞—Ç—å', '—Ä–∞–±–æ—Ç–∞—Ç—å', '–∏–≥—Ä–∞—Ç—å', '—Å–º–æ—Ç—Ä–µ—Ç—å', '—Å–ª—É—à–∞—Ç—å',
        '–∫—É—à–∞—Ç—å', '–ø–∏—Ç—å', '—Å–ø–∞—Ç—å', '–∂–∏—Ç—å', '—É—á–∏—Ç—å', '–∑–Ω–∞—Ç—å'
    }
    
    # –ï—Å–ª–∏ —Å–ª–æ–≤–æ –≤ —Å–ø–∏—Å–∫–µ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –≥–ª–∞–≥–æ–ª–æ–≤
    if word in known_verbs:
        return True
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é
    for ending in verb_endings:
        if word.endswith(ending):
            return True
    
    # –ì–ª–∞–≥–æ–ª—ã —Å —Ç–∏–ø–∏—á–Ω—ã–º–∏ —Å—É—Ñ—Ñ–∏–∫—Å–∞–º–∏
    if any(suffix in word for suffix in ['–æ–≤–∞', '–µ–≤–∞', '–∏–≤–∞', '—ã–≤–∞']):
        return True
    
    # –ì–ª–∞–≥–æ–ª—ã —Å –ø—Ä–∏—Å—Ç–∞–≤–∫–∞–º–∏
    verb_prefixes = ['–ø–æ', '–∑–∞', '–ø–æ–¥', '–Ω–∞–¥', '–æ—Ç', '–¥–æ', '–ø—Ä–æ', '–ø–µ—Ä–µ', '–≤—ã', '–≤', '—Å']
    for prefix in verb_prefixes:
        if word.startswith(prefix) and len(word) > len(prefix) + 2:
            return True
    
    return False

def filter_words_by_conditions(words: Set[str]) -> List[str]:
    """–§–∏–ª—å—Ç—Ä—É–µ—Ç —Å–ª–æ–≤–∞ –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º —É—Å–ª–æ–≤–∏—è–º"""
    # –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –±—É–∫–≤—ã
    forbidden_letters = {'—Å', '–ª', '–æ', '–∞', '—Ö', '–∏'}
    
    # –î–æ—Å—Ç—É–ø–Ω—ã–µ –±—É–∫–≤—ã (–≤—Å–µ —Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –∫—Ä–æ–º–µ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö)
    all_russian_letters = set('–∞–±–≤–≥–¥–µ—ë–∂–∑–∏–π–∫–ª–º–Ω–æ–ø—Ä—Å—Ç—É—Ñ—Ö—Ü—á—à—â—ä—ã—å—ç—é—è')
    available_letters = all_russian_letters - forbidden_letters
    
    filtered_words = []
    
    for word in words:
        if len(word) != 5:
            continue
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–ª–æ–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—É–∫–≤—ã
        if not all(letter in available_letters for letter in word):
            continue
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ —Å–ª–æ–≤–µ –µ—Å—Ç—å –±—É–∫–≤–∞ "–í"
        if '–≤' not in word:
            continue
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±—É–∫–≤–∞ "–í" –Ω–µ –Ω–∞ —á–µ—Ç–≤–µ—Ä—Ç–æ–π –∏ –ø—è—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏
        if word[3] == '–≤' or word[4] == '–≤':
            continue
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ —Å–ª–æ–≤–µ –µ—Å—Ç—å –±—É–∫–≤–∞ "–†" –Ω–∞ –≤—Ç–æ—Ä–æ–π –ø–æ–∑–∏—Ü–∏–∏
        if word[1] != '—Ä':
            continue
            
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–ª–æ–≤–æ —è–≤–ª—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º
        if not is_noun(word):
            continue
        
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≥–ª–∞–≥–æ–ª—ã
        if is_verb(word):
            continue
        
        filtered_words.append(word)
    
    return sorted(filtered_words)

def generate_possible_words() -> List[str]:
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–ª–æ–≤–∞ –ø–æ —É—Å–ª–æ–≤–∏—è–º"""
    # –ë–∞–∑–æ–≤—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±—É–∫–≤—ã (–∏—Å–∫–ª—é—á–∞—è –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ: —Å, –ª, –æ, –∞, —Ö, –∏)
    available_letters = {'–±', '–≤', '–≥', '–¥', '–µ', '—ë', '–∂', '–∑', '–π', '–∫', '–º', '–Ω', '–ø', '—Ä', '—Ç', '—É', '—Ñ', '—Ü', '—á', '—à', '—â', '—ä', '—ã', '—å', '—ç', '—é', '—è'}
    
    possible_words = []
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏ "–í" –∏ "–†"
    for l1 in available_letters:
        for l2 in available_letters:
            for l3 in available_letters:
                for l4 in available_letters:
                    for l5 in available_letters:
                        word = l1 + l2 + l3 + l4 + l5
                        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ —Å–ª–æ–≤–µ –µ—Å—Ç—å –±—É–∫–≤–∞ "–í" —Å –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –∏ "–†" –Ω–∞ 2-–π –ø–æ–∑–∏—Ü–∏–∏
                        if ('–≤' in word and word[3] != '–≤' and word[4] != '–≤' and 
                            word[1] == '—Ä'):
                            possible_words.append(word)
    
    return sorted(list(set(possible_words)))

def save_words_to_file(words: List[str], filename: str, title: str):
    """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤ –≤ —Ñ–∞–π–ª"""
    with open(filename, 'w', encoding='utf-8') as f:
        f.write(f"{title}\n")
        f.write("=" * 50 + "\n")
        f.write(f"–í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ: {len(words)}\n")
        f.write("=" * 50 + "\n\n")
        
        for i, word in enumerate(words, 1):
            f.write(f"{i:4d}. {word}\n")
    
    print(f"üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ —Ñ–∞–π–ª: {filename}")

def main():
    print("üéØ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–ª–æ–≤ –ø–æ —É—Å–ª–æ–≤–∏—è–º")
    print("=" * 50)
    print("–£—Å–ª–æ–≤–∏—è:")
    print("- –°–ª–æ–≤–æ –∏–∑ 5 –±—É–∫–≤")
    print("- –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è: –°, –õ, –û, –ê, –•, –ò")
    print("- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å –±—É–∫–≤–∞ –í")
    print("- –ë—É–∫–≤–∞ –í –Ω–µ –Ω–∞ 4-–π –∏ 5-–π –ø–æ–∑–∏—Ü–∏–∏")
    print("- –ë—É–∫–≤–∞ –† –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ 2-–π –ø–æ–∑–∏—Ü–∏–∏")
    print("- –°–ª–æ–≤–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º")
    print("- –°–ª–æ–≤–æ –ù–ï –º–æ–∂–µ—Ç –±—ã—Ç—å –≥–ª–∞–≥–æ–ª–æ–º")
    print("=" * 50)
    
    # –ü–æ–ª—É—á–∞–µ–º —Å–ª–æ–≤–∞—Ä—å
    print("üìö –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä—É—Å—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å...")
    dictionary_words = get_russian_words()
    print(f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(dictionary_words)} —Å–ª–æ–≤ –∏–∑ —Å–ª–æ–≤–∞—Ä—è")
    
    # –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ª–æ–≤–∞ –ø–æ —É—Å–ª–æ–≤–∏—è–º
    print("\nüîç –§–∏–ª—å—Ç—Ä—É–µ–º —Å–ª–æ–≤–∞ –ø–æ —É—Å–ª–æ–≤–∏—è–º...")
    filtered_words = filter_words_by_conditions(dictionary_words)
    
    print(f"\n‚úÖ –ù–∞–π–¥–µ–Ω–æ {len(filtered_words)} —Å–ª–æ–≤ –∏–∑ —Å–ª–æ–≤–∞—Ä—è")
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–ª–æ–≤–∞ –∏–∑ —Å–ª–æ–≤–∞—Ä—è
    if filtered_words:
        save_words_to_file(filtered_words, "—Å–ª–æ–≤–∞_–∏–∑_—Å–ª–æ–≤–∞—Ä—è.txt", "–°–ª–æ–≤–∞ –∏–∑ —Å–ª–æ–≤–∞—Ä—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —É—Å–ª–æ–≤–∏—è–º")
        print("–ü–µ—Ä–≤—ã–µ 20 —Å–ª–æ–≤:")
        for i, word in enumerate(filtered_words[:20], 1):
            print(f"{i:2d}. {word}")
        if len(filtered_words) > 20:
            print(f"... –∏ –µ—â–µ {len(filtered_words) - 20} —Å–ª–æ–≤ (—Å–º. —Ñ–∞–π–ª)")
    else:
        print("–°–ª–æ–≤–∞ –∏–∑ —Å–ª–æ–≤–∞—Ä—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
    print("\nüé≤ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏...")
    possible_combinations = generate_possible_words()
    
    print(f"\nüî¢ –í—Å–µ–≥–æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π: {len(possible_combinations)}")
    print("–ü–µ—Ä–≤—ã–µ 20 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π:")
    for i, word in enumerate(possible_combinations[:20], 1):
        print(f"{i:2d}. {word}")
    
    if len(possible_combinations) > 20:
        print(f"... –∏ –µ—â–µ {len(possible_combinations) - 20} –∫–æ–º–±–∏–Ω–∞—Ü–∏–π")
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
    save_words_to_file(possible_combinations, "–≤—Å–µ_–∫–æ–º–±–∏–Ω–∞—Ü–∏–∏.txt", "–í—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –±—É–∫–≤")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –∏–∑ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –µ—Å—Ç—å –≤ —Å–ª–æ–≤–∞—Ä–µ –∏ —è–≤–ª—è—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏
    print("\nüìñ –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∫–∞–∫–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –µ—Å—Ç—å –≤ —Å–ª–æ–≤–∞—Ä–µ –∏ —è–≤–ª—è—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏...")
    real_nouns = [word for word in possible_combinations if word in dictionary_words and is_noun(word)]
    
    print(f"\nüìö –ù–∞–π–¥–µ–Ω–æ {len(real_nouns)} —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö")
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ
    if real_nouns:
        save_words_to_file(real_nouns, "—Ä–µ–∞–ª—å–Ω—ã–µ_—Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ.txt", "–†–µ–∞–ª—å–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π")
        print("–ü–µ—Ä–≤—ã–µ 20 —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö:")
        for i, word in enumerate(real_nouns[:20], 1):
            print(f"{i:2d}. {word}")
        if len(real_nouns) > 20:
            print(f"... –∏ –µ—â–µ {len(real_nouns) - 20} —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö (—Å–º. —Ñ–∞–π–ª)")
    else:
        print("–†–µ–∞–ª—å–Ω—ã—Ö —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–æ")
    
    print("\nüéâ –ì–æ—Ç–æ–≤–æ! –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª—ã:")
    print("- —Å–ª–æ–≤–∞_–∏–∑_—Å–ª–æ–≤–∞—Ä—è.txt")
    print("- –≤—Å–µ_–∫–æ–º–±–∏–Ω–∞—Ü–∏–∏.txt") 
    print("- —Ä–µ–∞–ª—å–Ω—ã–µ_—Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ.txt")

if __name__ == "__main__":
    main() 